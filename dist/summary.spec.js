'use strict';

require('should');

var _fs = require('fs');

var _fs2 = _interopRequireDefault(_fs);

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _ = require('..');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var content = '\nLior Degani, the Co-Founder and head of Marketing of Swayy, pinged me last week when I was in California to tell me about his startup and give me beta access. I heard his pitch and was skeptical. I was also tired, cranky and missing my kids \u2013 so my frame of mind wasn\'t the most positive.\nI went into Swayy to check it out, and when it asked for access to my Twitter and permission to tweet from my account, all I could think was, "If this thing spams my Twitter account I am going to bitch-slap him all over the Internet." Fortunately that thought stayed in my head, and not out of my mouth.\nOne week later, I\'m totally addicted to Swayy and glad I said nothing about the spam (it doesn\'t send out spam tweets but I liked the line too much to not use it for this article). I pinged Lior on Facebook with a request for a beta access code for TNW readers. I also asked how soon can I write about it. It\'s that good. Seriously. I use every content curation service online. It really is That Good.\nWhat is Swayy? It\'s like Percolate and LinkedIn recommended articles, mixed with trending keywords for the topics you find interesting, combined with an analytics dashboard that shows the trends of what you do and how people react to it. I like it for the simplicity and accuracy of the content curation.\nEverything I\'m actually interested in reading is in one place \u2013 I don\'t have to skip from another major tech blog over to Harvard Business Review then hop over to another major tech or business blog. It\'s all in there. And it has saved me So Much Time\n\nAfter I decided that I trusted the service, I added my Facebook and LinkedIn accounts. The content just got That Much Better. I can share from the service itself, but I generally prefer reading the actual post first \u2013 so I end up sharing it from the main link, using Swayy more as a service for discovery.\nI\'m also finding myself checking out trending keywords more often (more often than never, which is how often I do it on Twitter.com).\n\n\nThe analytics side isn\'t as interesting for me right now, but that could be due to the fact that I\'ve barely been online since I came back from the US last weekend. The graphs also haven\'t given me any particularly special insights as I can\'t see which post got the actual feedback on the graph side (however there are numbers on the Timeline side.) This is a Beta though, and new features are being added and improved daily. I\'m sure this is on the list. As they say, if you aren\'t launching with something you\'re embarrassed by, you\'ve waited too long to launch.\nIt was the suggested content that impressed me the most. The articles really are spot on \u2013 which is why I pinged Lior again to ask a few questions:\nHow do you choose the articles listed on the site? Is there an algorithm involved? And is there any IP?\nYes, we\'re in the process of filing a patent for it. But basically the system works with a Natural Language Processing Engine. Actually, there are several parts for the content matching, but besides analyzing what topics the articles are talking about, we have machine learning algorithms that match you to the relevant suggested stuff. For example, if you shared an article about Zuck that got a good reaction from your followers, we might offer you another one about Kevin Systrom (just a simple example).\nWho came up with the idea for Swayy, and why? And what\'s your business model?\nOur business model is a subscription model for extra social accounts (extra Facebook / Twitter, etc) and team collaboration.\nThe idea was born from our day-to-day need to be active on social media, look for the best content to share with our followers, grow them, and measure what content works best.\nWho is on the team?\nOhad Frankfurt is the CEO, Shlomi Babluki is the CTO and Oz Katz does Product and Engineering, and I [Lior Degani] do Marketing. The four of us are the founders. Oz and I were in 8200 [an elite Israeli army unit] together. Emily Engelson does Community Management and Graphic Design.\nIf you use Percolate or read LinkedIn\'s recommended posts I think you\'ll love Swayy.\nWant to try Swayy out without having to wait? Go to this secret URL and enter the promotion code thenextweb . The first 300 people to use the code will get access.\nImage credit: Thinkstock\n';

describe('summarize', function () {
  it('can summarize text', function () {
    var _summarize = (0, _.summarize)(content),
        summary = _summarize.summary;

    summary.should.equal('' + 'I like it for the simplicity and accuracy of the content curation.\n\nI can share from the service itself, but I generally prefer reading the actual post first \u2013 so I end up sharing it from the main link, using Swayy more as a service for discovery.\n\nThe idea was born from our day-to-day need to be active on social media, look for the best content to share with our followers, grow them, and measure what content works best.');

    var ratio = Math.trunc(100 - 100 * (summary.length / content.length));
    content.length.should.equal(4278);
    summary.length.should.equal(424);
    ratio.should.equal(90);
  });

  it('can summarize html', function () {
    var html = _fs2.default.readFileSync(_path2.default.join(__dirname, '..', 'test', 'test1.html'));

    var _summarizeHtml = (0, _.summarizeHtml)(html),
        title = _summarizeHtml.title,
        summary = _summarizeHtml.summary,
        text = _summarizeHtml.text;

    title.should.equal('Meet the 23-Year-Old Innovating The Nail Industry With Static Nails');
    summary.should.equal('' + 'Alexis Irene is the 23-year-old founder of Static Nails, a manicure company she created out of her college dorm room.\n\nI was flipping through Instagram when I came across these intricate 3D doughnut nails and that\u2019s when my idea for Static Nails hit me.\n\nFinding a really talented manicurist is hard to come by, and getting your nails done was time consuming, smelled bad, was damaging to your nails, and cost a ton.\n\n\u201CI took this opportunity to turn an overlooked category into a must-have fashion accessory,\u201D Irene said.\n\nShe was quickly able to secure a brand partnership with Swarovski, and began working on the first press-on type nail to have 3D objects, intricate prints, and special effects.\n\n"The best part is that these nails are non-damaging to natural nails, they can be customized without damaging the original design, they only take 5 minutes to apply, and can be worn up to 18 days, or reapplied up to 6 times.\u201D\n\nI had put my college funds on the line to get the company off the ground and risked not being able to complete my senior year if the company failed.\u201D\n\nWe started chatting with Sephora a few months later for Static Nails to be picked-up in-store.\u201D\n\nBy the time I turned 17, I was Macy\u2019s Corporation\u2019s youngest Cosmetic Manager ever in one of their top performing stores, the Bloomingdale\'s in Santa Monica."\n\n"My goal is for Static Nails to be the number one consumer nail brand," Irene said.');

    var ratio = Math.trunc(100 - 100 * (summary.length / text.length));
    text.length.should.equal(4941);
    summary.length.should.equal(1419);
    ratio.should.equal(71);
  });
});

describe('getSortedSentences', function () {
  it('should get sorted sentences', function () {
    var _sortedSentences = (0, _.sortedSentences)(content, 5),
        sentences = _sortedSentences.sentences;

    sentences.should.deepEqual(['Our business model is a subscription model for extra social accounts (extra Facebook / Twitter, etc) and team collaboration.', 'Oz and I were in 8200 [an elite Israeli army unit] together.', 'Emily Engelson does Community Management and Graphic Design.', 'Image credit: Thinkstock', 'I\'m sure this is on the list.']);
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN1bW1hcnkuc3BlYy5qcyJdLCJuYW1lcyI6WyJjb250ZW50IiwiZGVzY3JpYmUiLCJpdCIsInN1bW1hcnkiLCJzaG91bGQiLCJlcXVhbCIsInJhdGlvIiwiTWF0aCIsInRydW5jIiwibGVuZ3RoIiwiaHRtbCIsImZzIiwicmVhZEZpbGVTeW5jIiwicGF0aCIsImpvaW4iLCJfX2Rpcm5hbWUiLCJ0aXRsZSIsInRleHQiLCJzZW50ZW5jZXMiLCJkZWVwRXF1YWwiXSwibWFwcGluZ3MiOiI7O0FBQUE7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBRUEsSUFBTUEsa3dJQUFOOztBQXlCQUMsU0FBUyxXQUFULEVBQXNCLFlBQU07QUFDMUJDLEtBQUcsb0JBQUgsRUFBeUIsWUFBTTtBQUFBLHFCQUNULGlCQUFVRixPQUFWLENBRFM7QUFBQSxRQUNyQkcsT0FEcUIsY0FDckJBLE9BRHFCOztBQUU3QkEsWUFBUUMsTUFBUixDQUFlQyxLQUFmLENBQXFCLHdiQUFyQjs7QUFPQSxRQUFNQyxRQUFRQyxLQUFLQyxLQUFMLENBQVcsTUFBTyxPQUFPTCxRQUFRTSxNQUFSLEdBQWlCVCxRQUFRUyxNQUFoQyxDQUFsQixDQUFkO0FBQ0FULFlBQVFTLE1BQVIsQ0FBZUwsTUFBZixDQUFzQkMsS0FBdEIsQ0FBNEIsSUFBNUI7QUFDQUYsWUFBUU0sTUFBUixDQUFlTCxNQUFmLENBQXNCQyxLQUF0QixDQUE0QixHQUE1QjtBQUNBQyxVQUFNRixNQUFOLENBQWFDLEtBQWIsQ0FBbUIsRUFBbkI7QUFDRCxHQWJEOztBQWVBSCxLQUFHLG9CQUFILEVBQXlCLFlBQU07QUFDN0IsUUFBTVEsT0FBT0MsYUFBR0MsWUFBSCxDQUFnQkMsZUFBS0MsSUFBTCxDQUFVQyxTQUFWLEVBQXFCLElBQXJCLEVBQTJCLE1BQTNCLEVBQW1DLFlBQW5DLENBQWhCLENBQWI7O0FBRDZCLHlCQUVJLHFCQUFjTCxJQUFkLENBRko7QUFBQSxRQUVyQk0sS0FGcUIsa0JBRXJCQSxLQUZxQjtBQUFBLFFBRWRiLE9BRmMsa0JBRWRBLE9BRmM7QUFBQSxRQUVMYyxJQUZLLGtCQUVMQSxJQUZLOztBQUc3QkQsVUFBTVosTUFBTixDQUFhQyxLQUFiLENBQW1CLHFFQUFuQjtBQUNBRixZQUFRQyxNQUFSLENBQWVDLEtBQWYsQ0FBcUIsNjhDQUFyQjs7QUFxQkEsUUFBTUMsUUFBUUMsS0FBS0MsS0FBTCxDQUFXLE1BQU8sT0FBT0wsUUFBUU0sTUFBUixHQUFpQlEsS0FBS1IsTUFBN0IsQ0FBbEIsQ0FBZDtBQUNBUSxTQUFLUixNQUFMLENBQVlMLE1BQVosQ0FBbUJDLEtBQW5CLENBQXlCLElBQXpCO0FBQ0FGLFlBQVFNLE1BQVIsQ0FBZUwsTUFBZixDQUFzQkMsS0FBdEIsQ0FBNEIsSUFBNUI7QUFDQUMsVUFBTUYsTUFBTixDQUFhQyxLQUFiLENBQW1CLEVBQW5CO0FBQ0QsR0E3QkQ7QUE4QkQsQ0E5Q0Q7O0FBZ0RBSixTQUFTLG9CQUFULEVBQStCLFlBQVk7QUFDekNDLEtBQUcsNkJBQUgsRUFBa0MsWUFBWTtBQUFBLDJCQUN0Qix1QkFBZ0JGLE9BQWhCLEVBQXlCLENBQXpCLENBRHNCO0FBQUEsUUFDcENrQixTQURvQyxvQkFDcENBLFNBRG9DOztBQUU1Q0EsY0FBVWQsTUFBVixDQUFpQmUsU0FBakIsQ0FBMkIsQ0FDekIsOEhBRHlCLEVBRXpCLDhEQUZ5QixFQUd6Qiw4REFIeUIsRUFJekIsMEJBSnlCLEVBS3pCLGdDQUx5QixDQUEzQjtBQU9ELEdBVEQ7QUFVRCxDQVhEIiwiZmlsZSI6InN1bW1hcnkuc3BlYy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAnc2hvdWxkJ1xuaW1wb3J0IGZzIGZyb20gJ2ZzJ1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCdcbmltcG9ydCB7IHN1bW1hcml6ZSwgc3VtbWFyaXplSHRtbCwgc29ydGVkU2VudGVuY2VzIH0gZnJvbSAnLi4nXG5cbmNvbnN0IGNvbnRlbnQgPSBgXG5MaW9yIERlZ2FuaSwgdGhlIENvLUZvdW5kZXIgYW5kIGhlYWQgb2YgTWFya2V0aW5nIG9mIFN3YXl5LCBwaW5nZWQgbWUgbGFzdCB3ZWVrIHdoZW4gSSB3YXMgaW4gQ2FsaWZvcm5pYSB0byB0ZWxsIG1lIGFib3V0IGhpcyBzdGFydHVwIGFuZCBnaXZlIG1lIGJldGEgYWNjZXNzLiBJIGhlYXJkIGhpcyBwaXRjaCBhbmQgd2FzIHNrZXB0aWNhbC4gSSB3YXMgYWxzbyB0aXJlZCwgY3Jhbmt5IGFuZCBtaXNzaW5nIG15IGtpZHMg4oCTIHNvIG15IGZyYW1lIG9mIG1pbmQgd2Fzbid0IHRoZSBtb3N0IHBvc2l0aXZlLlxuSSB3ZW50IGludG8gU3dheXkgdG8gY2hlY2sgaXQgb3V0LCBhbmQgd2hlbiBpdCBhc2tlZCBmb3IgYWNjZXNzIHRvIG15IFR3aXR0ZXIgYW5kIHBlcm1pc3Npb24gdG8gdHdlZXQgZnJvbSBteSBhY2NvdW50LCBhbGwgSSBjb3VsZCB0aGluayB3YXMsIFwiSWYgdGhpcyB0aGluZyBzcGFtcyBteSBUd2l0dGVyIGFjY291bnQgSSBhbSBnb2luZyB0byBiaXRjaC1zbGFwIGhpbSBhbGwgb3ZlciB0aGUgSW50ZXJuZXQuXCIgRm9ydHVuYXRlbHkgdGhhdCB0aG91Z2h0IHN0YXllZCBpbiBteSBoZWFkLCBhbmQgbm90IG91dCBvZiBteSBtb3V0aC5cbk9uZSB3ZWVrIGxhdGVyLCBJJ20gdG90YWxseSBhZGRpY3RlZCB0byBTd2F5eSBhbmQgZ2xhZCBJIHNhaWQgbm90aGluZyBhYm91dCB0aGUgc3BhbSAoaXQgZG9lc24ndCBzZW5kIG91dCBzcGFtIHR3ZWV0cyBidXQgSSBsaWtlZCB0aGUgbGluZSB0b28gbXVjaCB0byBub3QgdXNlIGl0IGZvciB0aGlzIGFydGljbGUpLiBJIHBpbmdlZCBMaW9yIG9uIEZhY2Vib29rIHdpdGggYSByZXF1ZXN0IGZvciBhIGJldGEgYWNjZXNzIGNvZGUgZm9yIFROVyByZWFkZXJzLiBJIGFsc28gYXNrZWQgaG93IHNvb24gY2FuIEkgd3JpdGUgYWJvdXQgaXQuIEl0J3MgdGhhdCBnb29kLiBTZXJpb3VzbHkuIEkgdXNlIGV2ZXJ5IGNvbnRlbnQgY3VyYXRpb24gc2VydmljZSBvbmxpbmUuIEl0IHJlYWxseSBpcyBUaGF0IEdvb2QuXG5XaGF0IGlzIFN3YXl5PyBJdCdzIGxpa2UgUGVyY29sYXRlIGFuZCBMaW5rZWRJbiByZWNvbW1lbmRlZCBhcnRpY2xlcywgbWl4ZWQgd2l0aCB0cmVuZGluZyBrZXl3b3JkcyBmb3IgdGhlIHRvcGljcyB5b3UgZmluZCBpbnRlcmVzdGluZywgY29tYmluZWQgd2l0aCBhbiBhbmFseXRpY3MgZGFzaGJvYXJkIHRoYXQgc2hvd3MgdGhlIHRyZW5kcyBvZiB3aGF0IHlvdSBkbyBhbmQgaG93IHBlb3BsZSByZWFjdCB0byBpdC4gSSBsaWtlIGl0IGZvciB0aGUgc2ltcGxpY2l0eSBhbmQgYWNjdXJhY3kgb2YgdGhlIGNvbnRlbnQgY3VyYXRpb24uXG5FdmVyeXRoaW5nIEknbSBhY3R1YWxseSBpbnRlcmVzdGVkIGluIHJlYWRpbmcgaXMgaW4gb25lIHBsYWNlIOKAkyBJIGRvbid0IGhhdmUgdG8gc2tpcCBmcm9tIGFub3RoZXIgbWFqb3IgdGVjaCBibG9nIG92ZXIgdG8gSGFydmFyZCBCdXNpbmVzcyBSZXZpZXcgdGhlbiBob3Agb3ZlciB0byBhbm90aGVyIG1ham9yIHRlY2ggb3IgYnVzaW5lc3MgYmxvZy4gSXQncyBhbGwgaW4gdGhlcmUuIEFuZCBpdCBoYXMgc2F2ZWQgbWUgU28gTXVjaCBUaW1lXG5cbkFmdGVyIEkgZGVjaWRlZCB0aGF0IEkgdHJ1c3RlZCB0aGUgc2VydmljZSwgSSBhZGRlZCBteSBGYWNlYm9vayBhbmQgTGlua2VkSW4gYWNjb3VudHMuIFRoZSBjb250ZW50IGp1c3QgZ290IFRoYXQgTXVjaCBCZXR0ZXIuIEkgY2FuIHNoYXJlIGZyb20gdGhlIHNlcnZpY2UgaXRzZWxmLCBidXQgSSBnZW5lcmFsbHkgcHJlZmVyIHJlYWRpbmcgdGhlIGFjdHVhbCBwb3N0IGZpcnN0IOKAkyBzbyBJIGVuZCB1cCBzaGFyaW5nIGl0IGZyb20gdGhlIG1haW4gbGluaywgdXNpbmcgU3dheXkgbW9yZSBhcyBhIHNlcnZpY2UgZm9yIGRpc2NvdmVyeS5cbkknbSBhbHNvIGZpbmRpbmcgbXlzZWxmIGNoZWNraW5nIG91dCB0cmVuZGluZyBrZXl3b3JkcyBtb3JlIG9mdGVuIChtb3JlIG9mdGVuIHRoYW4gbmV2ZXIsIHdoaWNoIGlzIGhvdyBvZnRlbiBJIGRvIGl0IG9uIFR3aXR0ZXIuY29tKS5cblxuXG5UaGUgYW5hbHl0aWNzIHNpZGUgaXNuJ3QgYXMgaW50ZXJlc3RpbmcgZm9yIG1lIHJpZ2h0IG5vdywgYnV0IHRoYXQgY291bGQgYmUgZHVlIHRvIHRoZSBmYWN0IHRoYXQgSSd2ZSBiYXJlbHkgYmVlbiBvbmxpbmUgc2luY2UgSSBjYW1lIGJhY2sgZnJvbSB0aGUgVVMgbGFzdCB3ZWVrZW5kLiBUaGUgZ3JhcGhzIGFsc28gaGF2ZW4ndCBnaXZlbiBtZSBhbnkgcGFydGljdWxhcmx5IHNwZWNpYWwgaW5zaWdodHMgYXMgSSBjYW4ndCBzZWUgd2hpY2ggcG9zdCBnb3QgdGhlIGFjdHVhbCBmZWVkYmFjayBvbiB0aGUgZ3JhcGggc2lkZSAoaG93ZXZlciB0aGVyZSBhcmUgbnVtYmVycyBvbiB0aGUgVGltZWxpbmUgc2lkZS4pIFRoaXMgaXMgYSBCZXRhIHRob3VnaCwgYW5kIG5ldyBmZWF0dXJlcyBhcmUgYmVpbmcgYWRkZWQgYW5kIGltcHJvdmVkIGRhaWx5LiBJJ20gc3VyZSB0aGlzIGlzIG9uIHRoZSBsaXN0LiBBcyB0aGV5IHNheSwgaWYgeW91IGFyZW4ndCBsYXVuY2hpbmcgd2l0aCBzb21ldGhpbmcgeW91J3JlIGVtYmFycmFzc2VkIGJ5LCB5b3UndmUgd2FpdGVkIHRvbyBsb25nIHRvIGxhdW5jaC5cbkl0IHdhcyB0aGUgc3VnZ2VzdGVkIGNvbnRlbnQgdGhhdCBpbXByZXNzZWQgbWUgdGhlIG1vc3QuIFRoZSBhcnRpY2xlcyByZWFsbHkgYXJlIHNwb3Qgb24g4oCTIHdoaWNoIGlzIHdoeSBJIHBpbmdlZCBMaW9yIGFnYWluIHRvIGFzayBhIGZldyBxdWVzdGlvbnM6XG5Ib3cgZG8geW91IGNob29zZSB0aGUgYXJ0aWNsZXMgbGlzdGVkIG9uIHRoZSBzaXRlPyBJcyB0aGVyZSBhbiBhbGdvcml0aG0gaW52b2x2ZWQ/IEFuZCBpcyB0aGVyZSBhbnkgSVA/XG5ZZXMsIHdlJ3JlIGluIHRoZSBwcm9jZXNzIG9mIGZpbGluZyBhIHBhdGVudCBmb3IgaXQuIEJ1dCBiYXNpY2FsbHkgdGhlIHN5c3RlbSB3b3JrcyB3aXRoIGEgTmF0dXJhbCBMYW5ndWFnZSBQcm9jZXNzaW5nIEVuZ2luZS4gQWN0dWFsbHksIHRoZXJlIGFyZSBzZXZlcmFsIHBhcnRzIGZvciB0aGUgY29udGVudCBtYXRjaGluZywgYnV0IGJlc2lkZXMgYW5hbHl6aW5nIHdoYXQgdG9waWNzIHRoZSBhcnRpY2xlcyBhcmUgdGFsa2luZyBhYm91dCwgd2UgaGF2ZSBtYWNoaW5lIGxlYXJuaW5nIGFsZ29yaXRobXMgdGhhdCBtYXRjaCB5b3UgdG8gdGhlIHJlbGV2YW50IHN1Z2dlc3RlZCBzdHVmZi4gRm9yIGV4YW1wbGUsIGlmIHlvdSBzaGFyZWQgYW4gYXJ0aWNsZSBhYm91dCBadWNrIHRoYXQgZ290IGEgZ29vZCByZWFjdGlvbiBmcm9tIHlvdXIgZm9sbG93ZXJzLCB3ZSBtaWdodCBvZmZlciB5b3UgYW5vdGhlciBvbmUgYWJvdXQgS2V2aW4gU3lzdHJvbSAoanVzdCBhIHNpbXBsZSBleGFtcGxlKS5cbldobyBjYW1lIHVwIHdpdGggdGhlIGlkZWEgZm9yIFN3YXl5LCBhbmQgd2h5PyBBbmQgd2hhdCdzIHlvdXIgYnVzaW5lc3MgbW9kZWw/XG5PdXIgYnVzaW5lc3MgbW9kZWwgaXMgYSBzdWJzY3JpcHRpb24gbW9kZWwgZm9yIGV4dHJhIHNvY2lhbCBhY2NvdW50cyAoZXh0cmEgRmFjZWJvb2sgLyBUd2l0dGVyLCBldGMpIGFuZCB0ZWFtIGNvbGxhYm9yYXRpb24uXG5UaGUgaWRlYSB3YXMgYm9ybiBmcm9tIG91ciBkYXktdG8tZGF5IG5lZWQgdG8gYmUgYWN0aXZlIG9uIHNvY2lhbCBtZWRpYSwgbG9vayBmb3IgdGhlIGJlc3QgY29udGVudCB0byBzaGFyZSB3aXRoIG91ciBmb2xsb3dlcnMsIGdyb3cgdGhlbSwgYW5kIG1lYXN1cmUgd2hhdCBjb250ZW50IHdvcmtzIGJlc3QuXG5XaG8gaXMgb24gdGhlIHRlYW0/XG5PaGFkIEZyYW5rZnVydCBpcyB0aGUgQ0VPLCBTaGxvbWkgQmFibHVraSBpcyB0aGUgQ1RPIGFuZCBPeiBLYXR6IGRvZXMgUHJvZHVjdCBhbmQgRW5naW5lZXJpbmcsIGFuZCBJIFtMaW9yIERlZ2FuaV0gZG8gTWFya2V0aW5nLiBUaGUgZm91ciBvZiB1cyBhcmUgdGhlIGZvdW5kZXJzLiBPeiBhbmQgSSB3ZXJlIGluIDgyMDAgW2FuIGVsaXRlIElzcmFlbGkgYXJteSB1bml0XSB0b2dldGhlci4gRW1pbHkgRW5nZWxzb24gZG9lcyBDb21tdW5pdHkgTWFuYWdlbWVudCBhbmQgR3JhcGhpYyBEZXNpZ24uXG5JZiB5b3UgdXNlIFBlcmNvbGF0ZSBvciByZWFkIExpbmtlZEluJ3MgcmVjb21tZW5kZWQgcG9zdHMgSSB0aGluayB5b3UnbGwgbG92ZSBTd2F5eS5cbldhbnQgdG8gdHJ5IFN3YXl5IG91dCB3aXRob3V0IGhhdmluZyB0byB3YWl0PyBHbyB0byB0aGlzIHNlY3JldCBVUkwgYW5kIGVudGVyIHRoZSBwcm9tb3Rpb24gY29kZSB0aGVuZXh0d2ViIC4gVGhlIGZpcnN0IDMwMCBwZW9wbGUgdG8gdXNlIHRoZSBjb2RlIHdpbGwgZ2V0IGFjY2Vzcy5cbkltYWdlIGNyZWRpdDogVGhpbmtzdG9ja1xuYFxuXG5kZXNjcmliZSgnc3VtbWFyaXplJywgKCkgPT4ge1xuICBpdCgnY2FuIHN1bW1hcml6ZSB0ZXh0JywgKCkgPT4ge1xuICAgIGNvbnN0IHsgc3VtbWFyeSB9ID0gc3VtbWFyaXplKGNvbnRlbnQpXG4gICAgc3VtbWFyeS5zaG91bGQuZXF1YWwoJycgK1xuYEkgbGlrZSBpdCBmb3IgdGhlIHNpbXBsaWNpdHkgYW5kIGFjY3VyYWN5IG9mIHRoZSBjb250ZW50IGN1cmF0aW9uLlxuXG5JIGNhbiBzaGFyZSBmcm9tIHRoZSBzZXJ2aWNlIGl0c2VsZiwgYnV0IEkgZ2VuZXJhbGx5IHByZWZlciByZWFkaW5nIHRoZSBhY3R1YWwgcG9zdCBmaXJzdCDigJMgc28gSSBlbmQgdXAgc2hhcmluZyBpdCBmcm9tIHRoZSBtYWluIGxpbmssIHVzaW5nIFN3YXl5IG1vcmUgYXMgYSBzZXJ2aWNlIGZvciBkaXNjb3ZlcnkuXG5cblRoZSBpZGVhIHdhcyBib3JuIGZyb20gb3VyIGRheS10by1kYXkgbmVlZCB0byBiZSBhY3RpdmUgb24gc29jaWFsIG1lZGlhLCBsb29rIGZvciB0aGUgYmVzdCBjb250ZW50IHRvIHNoYXJlIHdpdGggb3VyIGZvbGxvd2VycywgZ3JvdyB0aGVtLCBhbmQgbWVhc3VyZSB3aGF0IGNvbnRlbnQgd29ya3MgYmVzdC5gKVxuXG4gICAgY29uc3QgcmF0aW8gPSBNYXRoLnRydW5jKDEwMCAtICgxMDAgKiAoc3VtbWFyeS5sZW5ndGggLyBjb250ZW50Lmxlbmd0aCkpKVxuICAgIGNvbnRlbnQubGVuZ3RoLnNob3VsZC5lcXVhbCg0Mjc4KVxuICAgIHN1bW1hcnkubGVuZ3RoLnNob3VsZC5lcXVhbCg0MjQpXG4gICAgcmF0aW8uc2hvdWxkLmVxdWFsKDkwKVxuICB9KVxuXG4gIGl0KCdjYW4gc3VtbWFyaXplIGh0bWwnLCAoKSA9PiB7XG4gICAgY29uc3QgaHRtbCA9IGZzLnJlYWRGaWxlU3luYyhwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4nLCAndGVzdCcsICd0ZXN0MS5odG1sJykpXG4gICAgY29uc3QgeyB0aXRsZSwgc3VtbWFyeSwgdGV4dCB9ID0gc3VtbWFyaXplSHRtbChodG1sKVxuICAgIHRpdGxlLnNob3VsZC5lcXVhbCgnTWVldCB0aGUgMjMtWWVhci1PbGQgSW5ub3ZhdGluZyBUaGUgTmFpbCBJbmR1c3RyeSBXaXRoIFN0YXRpYyBOYWlscycpXG4gICAgc3VtbWFyeS5zaG91bGQuZXF1YWwoJycgK1xuYEFsZXhpcyBJcmVuZSBpcyB0aGUgMjMteWVhci1vbGQgZm91bmRlciBvZiBTdGF0aWMgTmFpbHMsIGEgbWFuaWN1cmUgY29tcGFueSBzaGUgY3JlYXRlZCBvdXQgb2YgaGVyIGNvbGxlZ2UgZG9ybSByb29tLlxuXG5JIHdhcyBmbGlwcGluZyB0aHJvdWdoIEluc3RhZ3JhbSB3aGVuIEkgY2FtZSBhY3Jvc3MgdGhlc2UgaW50cmljYXRlIDNEIGRvdWdobnV0IG5haWxzIGFuZCB0aGF04oCZcyB3aGVuIG15IGlkZWEgZm9yIFN0YXRpYyBOYWlscyBoaXQgbWUuXG5cbkZpbmRpbmcgYSByZWFsbHkgdGFsZW50ZWQgbWFuaWN1cmlzdCBpcyBoYXJkIHRvIGNvbWUgYnksIGFuZCBnZXR0aW5nIHlvdXIgbmFpbHMgZG9uZSB3YXMgdGltZSBjb25zdW1pbmcsIHNtZWxsZWQgYmFkLCB3YXMgZGFtYWdpbmcgdG8geW91ciBuYWlscywgYW5kIGNvc3QgYSB0b24uXG5cbuKAnEkgdG9vayB0aGlzIG9wcG9ydHVuaXR5IHRvIHR1cm4gYW4gb3Zlcmxvb2tlZCBjYXRlZ29yeSBpbnRvIGEgbXVzdC1oYXZlIGZhc2hpb24gYWNjZXNzb3J5LOKAnSBJcmVuZSBzYWlkLlxuXG5TaGUgd2FzIHF1aWNrbHkgYWJsZSB0byBzZWN1cmUgYSBicmFuZCBwYXJ0bmVyc2hpcCB3aXRoIFN3YXJvdnNraSwgYW5kIGJlZ2FuIHdvcmtpbmcgb24gdGhlIGZpcnN0IHByZXNzLW9uIHR5cGUgbmFpbCB0byBoYXZlIDNEIG9iamVjdHMsIGludHJpY2F0ZSBwcmludHMsIGFuZCBzcGVjaWFsIGVmZmVjdHMuXG5cblwiVGhlIGJlc3QgcGFydCBpcyB0aGF0IHRoZXNlIG5haWxzIGFyZSBub24tZGFtYWdpbmcgdG8gbmF0dXJhbCBuYWlscywgdGhleSBjYW4gYmUgY3VzdG9taXplZCB3aXRob3V0IGRhbWFnaW5nIHRoZSBvcmlnaW5hbCBkZXNpZ24sIHRoZXkgb25seSB0YWtlIDUgbWludXRlcyB0byBhcHBseSwgYW5kIGNhbiBiZSB3b3JuIHVwIHRvIDE4IGRheXMsIG9yIHJlYXBwbGllZCB1cCB0byA2IHRpbWVzLuKAnVxuXG5JIGhhZCBwdXQgbXkgY29sbGVnZSBmdW5kcyBvbiB0aGUgbGluZSB0byBnZXQgdGhlIGNvbXBhbnkgb2ZmIHRoZSBncm91bmQgYW5kIHJpc2tlZCBub3QgYmVpbmcgYWJsZSB0byBjb21wbGV0ZSBteSBzZW5pb3IgeWVhciBpZiB0aGUgY29tcGFueSBmYWlsZWQu4oCdXG5cbldlIHN0YXJ0ZWQgY2hhdHRpbmcgd2l0aCBTZXBob3JhIGEgZmV3IG1vbnRocyBsYXRlciBmb3IgU3RhdGljIE5haWxzIHRvIGJlIHBpY2tlZC11cCBpbi1zdG9yZS7igJ1cblxuQnkgdGhlIHRpbWUgSSB0dXJuZWQgMTcsIEkgd2FzIE1hY3nigJlzIENvcnBvcmF0aW9u4oCZcyB5b3VuZ2VzdCBDb3NtZXRpYyBNYW5hZ2VyIGV2ZXIgaW4gb25lIG9mIHRoZWlyIHRvcCBwZXJmb3JtaW5nIHN0b3JlcywgdGhlIEJsb29taW5nZGFsZSdzIGluIFNhbnRhIE1vbmljYS5cIlxuXG5cIk15IGdvYWwgaXMgZm9yIFN0YXRpYyBOYWlscyB0byBiZSB0aGUgbnVtYmVyIG9uZSBjb25zdW1lciBuYWlsIGJyYW5kLFwiIElyZW5lIHNhaWQuYClcblxuICAgIGNvbnN0IHJhdGlvID0gTWF0aC50cnVuYygxMDAgLSAoMTAwICogKHN1bW1hcnkubGVuZ3RoIC8gdGV4dC5sZW5ndGgpKSlcbiAgICB0ZXh0Lmxlbmd0aC5zaG91bGQuZXF1YWwoNDk0MSlcbiAgICBzdW1tYXJ5Lmxlbmd0aC5zaG91bGQuZXF1YWwoMTQxOSlcbiAgICByYXRpby5zaG91bGQuZXF1YWwoNzEpXG4gIH0pXG59KVxuXG5kZXNjcmliZSgnZ2V0U29ydGVkU2VudGVuY2VzJywgZnVuY3Rpb24gKCkge1xuICBpdCgnc2hvdWxkIGdldCBzb3J0ZWQgc2VudGVuY2VzJywgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IHsgc2VudGVuY2VzIH0gPSBzb3J0ZWRTZW50ZW5jZXMoY29udGVudCwgNSlcbiAgICBzZW50ZW5jZXMuc2hvdWxkLmRlZXBFcXVhbChbXG4gICAgICAnT3VyIGJ1c2luZXNzIG1vZGVsIGlzIGEgc3Vic2NyaXB0aW9uIG1vZGVsIGZvciBleHRyYSBzb2NpYWwgYWNjb3VudHMgKGV4dHJhIEZhY2Vib29rIC8gVHdpdHRlciwgZXRjKSBhbmQgdGVhbSBjb2xsYWJvcmF0aW9uLicsXG4gICAgICAnT3ogYW5kIEkgd2VyZSBpbiA4MjAwIFthbiBlbGl0ZSBJc3JhZWxpIGFybXkgdW5pdF0gdG9nZXRoZXIuJyxcbiAgICAgICdFbWlseSBFbmdlbHNvbiBkb2VzIENvbW11bml0eSBNYW5hZ2VtZW50IGFuZCBHcmFwaGljIERlc2lnbi4nLFxuICAgICAgJ0ltYWdlIGNyZWRpdDogVGhpbmtzdG9jaycsXG4gICAgICAnSVxcJ20gc3VyZSB0aGlzIGlzIG9uIHRoZSBsaXN0LidcbiAgICBdKVxuICB9KVxufSlcbiJdfQ==
